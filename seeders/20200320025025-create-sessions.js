const dateFns = require('date-fns');

const baseDate = new Date();
const laterDate = new Date(baseDate);
const dateExpiredRefresh = new Date(baseDate);
const earlierDate = new Date(baseDate);
laterDate.setHours(laterDate.getHours() + 2);
dateExpiredRefresh.setDate(baseDate.getDate() - 3);
earlierDate.setDate(baseDate.getDate() - 1);

const data = [
  {
    access_token: 'access',
    refresh_token: 'refresh',
    owner_id: 1,
    owner_type: 'pixo',
    scope: 'pixo',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'client_access_token',
    refresh_token: 'client_refresh_token',
    owner_id: 1,
    owner_type: 'client',
    scope: 'payments',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'bond_user_access_token',
    refresh_token: 'bond_user_refresh_token',
    owner_id: 1,
    owner_type: 'bond_user',
    scope: 'bond_user',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'access_token',
    refresh_token: 'expired_refresh_token',
    owner_id: 1,
    owner_type: 'pixo',
    scope: 'pixo',
    expires_at: baseDate,
    created_at: dateExpiredRefresh,
  },
  {
    access_token: 'expired_access_token',
    refresh_token: 'refresh_token',
    owner_id: 1,
    owner_type: 'client',
    scope: 'payments',
    expires_at: baseDate,
    created_at: baseDate,
  },
  {
    access_token: 'refreshed_access_token',
    refresh_token: 'refreshed_refresh_token',
    owner_id: 1,
    owner_type: 'pixo',
    scope: 'pixo',
    expires_at: laterDate,
    created_at: baseDate,
    refreshed_at: baseDate,
  },
  {
    access_token: 'bond_user_access_token_no_csa',
    refresh_token: 'bond_user_refresh_token_no_csa',
    owner_id: 2,
    owner_type: 'bond_user',
    scope: 'bond_user',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'bond_user_access_token_change_pin',
    refresh_token: 'bond_user_refresh_token_change_pin',
    owner_id: 5,
    owner_type: 'bond_user',
    scope: 'bond_user',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'bond_user_access_token_expired_session',
    refresh_token: 'bond_user_refresh_token_expired_session',
    owner_id: 5,
    owner_type: 'bond_user',
    scope: 'bond_user',
    expires_at: new Date(),
    created_at: baseDate,
  },
  {
    access_token: 'ops_access_token',
    refresh_token: 'ops_refresh_token',
    owner_id: 1,
    owner_type: 'admin',
    scope: 'bond',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'cs_access_token',
    refresh_token: 'cs_refresh_token',
    owner_id: 2,
    owner_type: 'admin',
    scope: 'bond',
    // expires_at: baseDate,
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'admin_access_token_expired_session',
    refresh_token: 'admin_refresh_token_expired_session',
    owner_id: 1,
    owner_type: 'admin',
    scope: 'bond',
    expires_at: new Date(),
    created_at: baseDate,
  },
  {
    access_token: 'does_not_matter',
    refresh_token: 'does_not_matter',
    owner_id: 11,
    owner_type: 'bond_user',
    scope: 'bond_user',
    expires_at: new Date(),
    created_at: baseDate,
  },
  {
    access_token: 'admin_access_token',
    refresh_token: 'admin_refresh_token',
    owner_id: 5,
    owner_type: 'admin',
    scope: 'bond',
    expires_at: laterDate,
    created_at: baseDate,
  },
  {
    access_token: 'clients_payments_expired_session_access_token',
    refresh_token: 'clients_payments_expired_session_refresh_token',
    owner_id: 1,
    owner_type: 'client',
    scope: 'payments',
    expires_at: earlierDate,
    created_at: baseDate,
  },
  {
    access_token: 'cs_checker_access_token',
    refresh_token: 'cs_checker_refresh_token',
    owner_id: 6,
    owner_type: 'admin',
    scope: 'bond',
    // expires_at: baseDate,
    expires_at: laterDate,
    created_at: baseDate,
  },
  // {
  //   access_token: 'bond_user_access_token_2',
  //   refresh_token: 'bond_user_refresh_token_2',
  //   owner_id: 1,
  //   owner_type: 'bond_user',
  //   scope: 'bond_user',
  //   expires_at: laterDate,
  //   created_at: baseDate,
  // },
  // {
  //   access_token: 'bond_user_access_token_3',
  //   refresh_token: 'bond_user_refresh_token_3',
  //   owner_id: 1,
  //   owner_type: 'bond_user',
  //   scope: 'bond_user',
  //   expires_at: laterDate,
  //   created_at: baseDate,
  // },
];

module.exports = {
  up: queryInterface => queryInterface.bulkInsert('sessions', data),

  down: (queryInterface, sequelize) =>
    sequelize.query('truncate sessions restart identity cascade'),
};
